# OpenTelemetry Demo Helm Chart Values
# All observability backend features disabled, using external OTEL collector
opentelemetry-collector:
  enabled: false
jaeger:
  enabled: false
prometheus:
  enabled: false
grafana:
  enabled: false
opensearch:
  enabled: false
default:
  envOverrides:
    # Changed protocol to grpc for port 4317
    - name: OTEL_EXPORTER_OTLP_PROTOCOL
      value: "grpc"
    # Updated all endpoints to use standard gRPC port 4317
    - name: OTEL_EXPORTER_OTLP_ENDPOINT
      value: "http://alloy.observability-prd.svc:4317"
components:
  loadgenerator:
    enabled: true
    env:
      # 1. TARGET: Where to send the traffic (The Shop)
      - name: FRONTEND_ADDR
        value: "astronomy-shop-frontendproxy:8080"
      
      # 2. TARGET (Standard Locust Variable): Explicitly set the base URL
      - name: LOCUST_HOST
        value: "http://astronomy-shop-frontendproxy:8080"

      # 3. LISTENER: Where the Locust Web UI listens (MUST be 0.0.0.0)
      - name: LOCUST_WEB_HOST
        value: "0.0.0.0"

      # 4. Load Settings
      - name: LOCUST_USERS
        value: "2"
      - name: LOCUST_SPAWN_RATE
        value: "1"
